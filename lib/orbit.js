"use strict";THREE.OrbitControls=function(a,b){function c(){return 2*Math.PI/60/60*H.autoRotateSpeed}function d(){return Math.pow(.95,H.zoomSpeed)}function e(a){P.theta-=a}function f(a){P.phi-=a}function g(a){H.object instanceof THREE.PerspectiveCamera?Q/=a:H.object instanceof THREE.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom*a)),H.object.updateProjectionMatrix(),S=!0):(void 0,H.enableZoom=!1)}function h(a){H.object instanceof THREE.PerspectiveCamera?Q*=a:H.object instanceof THREE.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom/a)),H.object.updateProjectionMatrix(),S=!0):(void 0,H.enableZoom=!1)}function i(a){T.set(a.clientX,a.clientY)}function j(a){Z.set(a.clientX,a.clientY)}function k(a){W.set(a.clientX,a.clientY)}function l(a){U.set(a.clientX,a.clientY),V.subVectors(U,T);var b=H.domElement===document?H.domElement.body:H.domElement;e(2*Math.PI*V.x/b.clientWidth*H.rotateSpeed),f(2*Math.PI*V.y/b.clientHeight*H.rotateSpeed),T.copy(U),H.update()}function m(a){$.set(a.clientX,a.clientY),_.subVectors($,Z),0<_.y?g(d()):0>_.y&&h(d()),Z.copy($),H.update()}function n(a){X.set(a.clientX,a.clientY),Y.subVectors(X,W),ca(Y.x,Y.y),W.copy(X),H.update()}function o(){}function p(a){0>a.deltaY?h(d()):0<a.deltaY&&g(d()),H.update()}function q(a){switch(a.keyCode){case H.keys.UP:ca(0,H.keyPanSpeed),H.update();break;case H.keys.BOTTOM:ca(0,-H.keyPanSpeed),H.update();break;case H.keys.LEFT:ca(H.keyPanSpeed,0),H.update();break;case H.keys.RIGHT:ca(-H.keyPanSpeed,0),H.update();}}function r(a){T.set(a.touches[0].pageX,a.touches[0].pageY)}function s(a){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);Z.set(0,d)}function t(a){W.set(a.touches[0].pageX,a.touches[0].pageY)}function u(a){U.set(a.touches[0].pageX,a.touches[0].pageY),V.subVectors(U,T);var b=H.domElement===document?H.domElement.body:H.domElement;e(2*Math.PI*V.x/b.clientWidth*H.rotateSpeed),f(2*Math.PI*V.y/b.clientHeight*H.rotateSpeed),T.copy(U),H.update()}function v(a){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,e=Math.sqrt(b*b+c*c);$.set(0,e),_.subVectors($,Z),0<_.y?h(d()):0>_.y&&g(d()),Z.copy($),H.update()}function w(a){X.set(a.touches[0].pageX,a.touches[0].pageY),Y.subVectors(X,W),ca(Y.x,Y.y),W.copy(X),H.update()}function x(){}function y(a){if(!1!==H.enabled){switch(a.preventDefault(),a.button){case H.mouseButtons.ORBIT:if(!1===H.enableRotate)return;i(a),M=L.ROTATE;break;case H.mouseButtons.ZOOM:if(!1===H.enableZoom)return;j(a),M=L.DOLLY;break;case H.mouseButtons.PAN:if(!1===H.enablePan)return;k(a),M=L.PAN;}M!==L.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",A,!1),H.dispatchEvent(J))}}function z(a){if(!1!==H.enabled)switch(a.preventDefault(),M){case L.ROTATE:if(!1===H.enableRotate)return;l(a);break;case L.DOLLY:if(!1===H.enableZoom)return;m(a);break;case L.PAN:if(!1===H.enablePan)return;n(a);}}function A(a){!1===H.enabled||(o(a),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",A,!1),H.dispatchEvent(K),M=L.NONE)}function B(a){!1===H.enabled||!1===H.enableZoom||M!==L.NONE&&M!==L.ROTATE||(a.preventDefault(),a.stopPropagation(),p(a),H.dispatchEvent(J),H.dispatchEvent(K))}function C(a){!1===H.enabled||!1===H.enableKeys||!1===H.enablePan||q(a)}function D(a){if(!1!==H.enabled){switch(a.touches.length){case 1:if(!1===H.enableRotate)return;r(a),M=L.TOUCH_ROTATE;break;case 2:if(!1===H.enableZoom)return;s(a),M=L.TOUCH_DOLLY;break;case 3:if(!1===H.enablePan)return;t(a),M=L.TOUCH_PAN;break;default:M=L.NONE;}M!==L.NONE&&H.dispatchEvent(J)}}function E(a){if(!1!==H.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(!1===H.enableRotate)return;if(M!==L.TOUCH_ROTATE)return;u(a);break;case 2:if(!1===H.enableZoom)return;if(M!==L.TOUCH_DOLLY)return;v(a);break;case 3:if(!1===H.enablePan)return;if(M!==L.TOUCH_PAN)return;w(a);break;default:M=L.NONE;}}function F(a){!1===H.enabled||(x(a),H.dispatchEvent(K),M=L.NONE)}function G(a){a.preventDefault()}this.object=a,this.domElement=b===void 0?document:b,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return O.phi},this.getAzimuthalAngle=function(){return O.theta},this.saveState=function(){H.target0.copy(H.target),H.position0.copy(H.object.position),H.zoom0=H.object.zoom},this.reset=function(){H.target.copy(H.target0),H.object.position.copy(H.position0),H.object.zoom=H.zoom0,H.object.updateProjectionMatrix(),H.dispatchEvent(I),H.update(),M=L.NONE},this.update=function(){var b=new THREE.Vector3,d=new THREE.Quaternion().setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),f=d.clone().inverse(),g=new THREE.Vector3,h=new THREE.Quaternion;return function(){var a=H.object.position;return b.copy(a).sub(H.target),b.applyQuaternion(d),O.setFromVector3(b),H.autoRotate&&M===L.NONE&&e(c()),O.theta+=P.theta,O.phi+=P.phi,O.theta=Math.max(H.minAzimuthAngle,Math.min(H.maxAzimuthAngle,O.theta)),O.phi=Math.max(H.minPolarAngle,Math.min(H.maxPolarAngle,O.phi)),O.makeSafe(),O.radius*=Q,O.radius=Math.max(H.minDistance,Math.min(H.maxDistance,O.radius)),H.target.add(R),b.setFromSpherical(O),b.applyQuaternion(f),a.copy(H.target).add(b),H.object.lookAt(H.target),!0===H.enableDamping?(P.theta*=1-H.dampingFactor,P.phi*=1-H.dampingFactor):P.set(0,0,0),Q=1,R.set(0,0,0),!!(S||g.distanceToSquared(H.object.position)>N||8*(1-h.dot(H.object.quaternion))>N)&&(H.dispatchEvent(I),g.copy(H.object.position),h.copy(H.object.quaternion),S=!1,!0)}}(),this.dispose=function(){H.domElement.removeEventListener("contextmenu",G,!1),H.domElement.removeEventListener("mousedown",y,!1),H.domElement.removeEventListener("wheel",B,!1),H.domElement.removeEventListener("touchstart",D,!1),H.domElement.removeEventListener("touchend",F,!1),H.domElement.removeEventListener("touchmove",E,!1),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",A,!1),window.removeEventListener("keydown",C,!1)};var H=this,I={type:"change"},J={type:"start"},K={type:"end"},L={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},M=L.NONE,N=1e-6,O=new THREE.Spherical,P=new THREE.Spherical,Q=1,R=new THREE.Vector3,S=!1,T=new THREE.Vector2,U=new THREE.Vector2,V=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,Z=new THREE.Vector2,$=new THREE.Vector2,_=new THREE.Vector2,aa=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,0),a.multiplyScalar(-b),R.add(a)}}(),ba=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,1),a.multiplyScalar(b),R.add(a)}}(),ca=function(){var a=new THREE.Vector3;return function(b,c){var d=H.domElement===document?H.domElement.body:H.domElement;if(H.object instanceof THREE.PerspectiveCamera){var e=H.object.position;a.copy(e).sub(H.target);var f=a.length();f*=Math.tan(H.object.fov/2*Math.PI/180),aa(2*b*f/d.clientHeight,H.object.matrix),ba(2*c*f/d.clientHeight,H.object.matrix)}else H.object instanceof THREE.OrthographicCamera?(aa(b*(H.object.right-H.object.left)/H.object.zoom/d.clientWidth,H.object.matrix),ba(c*(H.object.top-H.object.bottom)/H.object.zoom/d.clientHeight,H.object.matrix)):(H.enablePan=!1)}}();H.domElement.addEventListener("contextmenu",G,!1),H.domElement.addEventListener("mousedown",y,!1),H.domElement.addEventListener("wheel",B,!1),H.domElement.addEventListener("touchstart",D,!1),H.domElement.addEventListener("touchend",F,!1),H.domElement.addEventListener("touchmove",E,!1),window.addEventListener("keydown",C,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function get(){return this.target}},noZoom:{get:function get(){return!this.enableZoom},set:function set(a){void 0,this.enableZoom=!a}},noRotate:{get:function get(){return!this.enableRotate},set:function set(a){void 0,this.enableRotate=!a}},noPan:{get:function get(){return!this.enablePan},set:function set(a){void 0,this.enablePan=!a}},noKeys:{get:function get(){return!this.enableKeys},set:function set(a){void 0,this.enableKeys=!a}},staticMoving:{get:function get(){return!this.enableDamping},set:function set(a){void 0,this.enableDamping=!a}},dynamicDampingFactor:{get:function get(){return this.dampingFactor},set:function set(a){void 0,this.dampingFactor=a}}});